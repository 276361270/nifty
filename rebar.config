{port_env, [{".*", "CC", "clang"}]}.

{port_specs, [
	{".*", "priv/clang_parse.so", ["c_src/clang_parse.c"], [{env,[
		{"CFLAGS", "$CFLAGS -I$CLANG_INCLUDE"},
		{"LDFLAGS", "$LDFLAGS -L$CLANG_LIBRARY -lclang"}]}]},
	{"priv/nifty.so", ["c_src/nifty.c"]}
	]}.

{deps, [
	{erlydtl, ".*", {git, "https://github.com/erlydtl/erlydtl", "26cb8fc"}},
	{rebar, "2.1", {git, "https://github.com/rebar/rebar.git", "8b7f544"}} %% locked on release version 2.1 
	]}.

{erl_opts, [debug_info, report_warnings,
	    warn_export_vars, %warn_unused_import,
	    warn_missing_spec, warn_untyped_record]}.

%% not ideal but works for the time being
{pre_hooks,
	[{compile, "sh -c \"rm -f ebin/nifty_app_template.beam ebin/nifty_config_template.beam ebin/nifty_c_template.beam ebin/nifty_erl_template.beam\""}]}.

{post_hooks,
	[{compile, "sh -c \"ERL_LIBS=deps/:. escript ./priv/nifty_compile_templates.erl\""}]}.
